---
id: 3057
title: Push
lang: ru
level: easy
tags: array
---

## Проблема

Реализовать функцию `Array.push` на уровне системы типов.
Например:

```typescript
type Result = Push<[1, 2], "3">; // [1, 2, '3']
```

## Решение

И вправду, легкая задача.
Чтобы реализовать тип, который добавит новый элемент в существующий массив, нам нужно сделать два действия.
Первое - это взять все элементы из входного массива.
Второе - это добавить к этим элементам новый.

Чтобы взять все элементы из массива, мы можем воспользоваться вариативными типами.
Давайте это и сделаем и вернем массив с элементами из массива `T`:

```typescript
type Push<T, U> = [...T];
```

Получаем ошибку компиляции "A rest element type must be an array type".
Это означает, что наши вариативные типы могут работать только с массивами.
Поэтому добавим ограничение на дженерике и скажем, что мы работаем с массивами:

```typescript
type Push<T extends unknown[], U> = [...T];
```

Теперь, у нас есть копия входного массива `T`.
Единственное, что остается, это добавить к этим элементам элемент `U`:

```typescript
type Push<T extends unknown[], U> = [...T, U];
```

Таким образом, мы реализовали операцию добавления нового элемента в массив на уровне типов.

## Что почитать

- [Дженерики](https://www.typescriptlang.org/docs/handbook/2/generics.html)
- [Вариативные типы](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-0.html#variadic-tuple-types)
